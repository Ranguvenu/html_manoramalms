{"version":3,"file":"onlineexams.min.js","sources":["../src/onlineexams.js"],"sourcesContent":["define([\n    'local_onlineexams/jquery.dataTables',\n    'jquery','core/str','core/modal_factory', 'core/ajax'\n], function(DataTable, $,Str,ModalFactory, Ajax){\n    return courses = {\n        load : function() {\n        },\n        usersdatatable : function(args) {\n            params = [];\n            params.action = args.action;\n            params.courseid = args.courseid;\n\t\t\tStr.get_strings([{\n                key: 'search',\n                component: 'local_courses'\n            }, {\n                key: 'no_users_enrolled',\n                component: 'local_courses'\n            }]).then(function(s) {\n            var oTable = $('#course_users').dataTable({\n                'bInfo': false,\n                'processing': true,\n                'serverSide': true,\n                'ordering': false,\n                'ajax': {\n                    \"type\": \"POST\",\n                    \"url\": M.cfg.wwwroot + '/local/courses/ajax.php',\n                    \"data\": params\n                },\n                \"bLengthChange\": false,\n                \"language\": {\n                    \"paginate\": {\n                        \"next\": \">\",\n                        \"previous\": \"<\"\n                    },\n                    'processing': '<img src='+M.cfg.wwwroot + '/local/ajax-loader.svg>'\n                },\n                \"oLanguage\": {\n                  \"sSearch\" : s[0],\n\t\t\t\t  \"sZeroRecords\": s[1]\n                },\n            });\n\t\t\t });\n        },\n        deleteuser: function(element) {\n          var enrollmentid = element.userid;\n          // console.log(element);\n            return Str.get_strings([{\n                key: 'deleteuser',\n                component: 'local_courses'\n            }, {\n                key: 'confirmdelete',\n                component: 'local_courses'\n            }]).then(function(s) {\n                ModalFactory.create({\n                    title: s[0],\n                    type: ModalFactory.types.DEFAULT,\n                    body: s[1],\n                    footer: '<button type=\"button\" class=\"btn btn-primary\" data-action=\"save\">'+M.util.get_string(\"yes\", \"moodle\")+'</button>&nbsp;' +\n            '<button type=\"button\" class=\"btn btn-secondary\" data-action=\"cancel\">'+M.util.get_string(\"no\", \"moodle\")+'</button>'\n                }).done(function(modal) {\n                    this.modal = modal;\n                     modal.getRoot().find('[data-action=\"save\"]').on('click', function() {\n                        window.location.href ='enrolledusers.php?id='+element.id+'&ue='+element.userid+'&confirm=1&sesskey=' + M.cfg.sesskey;\n                    }.bind(this));\n                    modal.getFooter().find('[data-action=\"cancel\"]').on('click', function() {\n                        modal.setBody('');\n                        modal.hide();\n                    });\n                    modal.show();\n                }.bind(this));\n            }.bind(this));\n        },\n    };\n    \n});\n"],"names":["define","DataTable","$","Str","ModalFactory","Ajax","courses","load","usersdatatable","args","params","action","courseid","get_strings","key","component","then","s","dataTable","M","cfg","wwwroot","deleteuser","element","userid","create","title","type","types","DEFAULT","body","footer","util","get_string","done","modal","getRoot","find","on","window","location","href","id","sesskey","bind","this","getFooter","setBody","hide","show"],"mappings":"AAAAA,uCAAO,CACH,sCACA,SAAS,WAAW,qBAAsB,cAC3C,SAASC,UAAWC,EAAEC,IAAIC,aAAcC,aAChCC,QAAU,CACbC,KAAO,aAEPC,eAAiB,SAASC,MACtBC,OAAS,GACTA,OAAOC,OAASF,KAAKE,OACrBD,OAAOE,SAAWH,KAAKG,SAChCT,IAAIU,YAAY,CAAC,CACJC,IAAK,SACLC,UAAW,iBACZ,CACCD,IAAK,oBACLC,UAAW,mBACXC,MAAK,SAASC,GACLf,EAAE,iBAAiBgB,UAAU,QAC7B,cACK,cACA,YACF,OACJ,MACI,WACDC,EAAEC,IAAIC,QAAU,+BACfX,uBAEK,WACL,UACI,MACA,aACI,gBAEF,YAAYS,EAAEC,IAAIC,QAAU,qCAEjC,SACCJ,EAAE,gBACVA,EAAE,UAKhBK,WAAY,SAASC,SACAA,QAAQC,cAElBrB,IAAIU,YAAY,CAAC,CACpBC,IAAK,aACLC,UAAW,iBACZ,CACCD,IAAK,gBACLC,UAAW,mBACXC,KAAK,SAASC,GACdb,aAAaqB,OAAO,CAChBC,MAAOT,EAAE,GACTU,KAAMvB,aAAawB,MAAMC,QACzBC,KAAMb,EAAE,GACRc,OAAQ,oEAAoEZ,EAAEa,KAAKC,WAAW,MAAO,UAA7F,uFACwDd,EAAEa,KAAKC,WAAW,KAAM,UAAU,cACnGC,KAAK,SAASC,YACRA,MAAQA,MACZA,MAAMC,UAAUC,KAAK,wBAAwBC,GAAG,QAAS,WACtDC,OAAOC,SAASC,KAAM,wBAAwBlB,QAAQmB,GAAG,OAAOnB,QAAQC,OAAO,sBAAwBL,EAAEC,IAAIuB,SAC/GC,KAAKC,OACPV,MAAMW,YAAYT,KAAK,0BAA0BC,GAAG,SAAS,WACzDH,MAAMY,QAAQ,IACdZ,MAAMa,UAEVb,MAAMc,QACRL,KAAKC,QACTD,KAAKC"}